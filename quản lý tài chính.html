<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω t√†i ch√≠nh c√° nh√¢n </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
            margin: 0;
            padding: 0;
        }
        header {
            background: #2c7be5;
            color: white;
            padding: 15px;
            text-align: center;
        }
        .container {
            max-width: 1000px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 { color: #2c7be5; }
        input, select, button {
            padding: 8px;
            margin: 6px 0;
            width: 100%;
        }
        button {
            background: #2c7be5;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover { background: #1a5fc1; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        .income { color: green; }
        .expense { color: red; }
        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
    </style>
</head>
<body>
<header>
    <h1>Website Qu·∫£n L√Ω T√†i Ch√≠nh C√° Nh√¢n</h1>
</header>

<div class="container">
    <h2>Th√™m kho·∫£n thu / chi</h2>
    <input type="text" id="desc" placeholder="M√¥ t·∫£">
    <input type="number" id="amount" placeholder="S·ªë ti·ªÅn">
    <select id="type">
        <option value="income">Thu nh·∫≠p</option>
        <option value="expense">Chi ti√™u</option>
    </select>
    <select id="category">
        <option>ƒÇn u·ªëng</option>
        <option>H·ªçc t·∫≠p</option>
        <option>Gi·∫£i tr√≠</option>
        <option>ƒêi l·∫°i</option>
        <option>Kh√°c</option>
    </select>
    <button onclick="addTransaction()">Th√™m giao d·ªãch</button>

    <h2>Danh s√°ch giao d·ªãch</h2>
    <table>
        <thead>
            <tr>
                <th>M√¥ t·∫£</th>
                <th>S·ªë ti·ªÅn</th>
                <th>Lo·∫°i</th>
                <th>Nh√≥m</th>
                <th>Th·ªùi gian</th>
            </tr>
        </thead>
        <tbody id="transactions"></tbody>
    </table>

    <h2>T·ªïng quan t√†i ch√≠nh</h2>
    <p>T·ªïng thu: <span class="income" id="totalIncome">0</span></p>
    <p>T·ªïng chi: <span class="expense" id="totalExpense">0</span></p>
    <p>S·ªë d∆∞: <strong id="balance">0</strong></p>

    <h2>L∆∞u & T·∫£i d·ªØ li·ªáu</h2>
    <div class="actions">
        <button onclick="exportExcel()">üì• T·∫£i xu·ªëng file Excel</button>
        <input type="file" id="fileInput" accept=".csv" onchange="importExcel()">
    </div>
</div>

<script>
    let data = [];

    function addTransaction() {
        const t = {
            desc: desc.value,
            amount: Number(amount.value),
            type: type.value,
            category: category.value,
            time: new Date().toLocaleString()
        };
        if (!t.desc || !t.amount) return alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin');
        data.push(t);
        render();
    }

    function render() {
        let income = 0, expense = 0;
        transactions.innerHTML = '';
        data.forEach(t => {
            if (t.type === 'income') income += t.amount;
            else expense += t.amount;
            transactions.innerHTML += `
                <tr>
                    <td>${t.desc}</td>
                    <td>${t.amount}</td>
                    <td class="${t.type}">${t.type}</td>
                    <td>${t.category}</td>
                    <td>${t.time}</td>
                </tr>`;
        });
        totalIncome.innerText = income;
        totalExpense.innerText = expense;
        balance.innerText = income - expense;
    }

    function exportExcel() {
        let csv = "M√¥ t·∫£,S·ªë ti·ªÅn,Lo·∫°i,Nh√≥m,Th·ªùi gian\n";
        data.forEach(t => {
            csv += `${t.desc},${t.amount},${t.type},${t.category},${t.time}\n`;
        });
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'quan_ly_tai_chinh.csv';
        link.click();
    }

    function importExcel() {
        const file = fileInput.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            const lines = e.target.result.split('\n').slice(1);
            data = [];
            lines.forEach(line => {
                if (!line.trim()) return;
                const [desc, amount, type, category, time] = line.split(',');
                data.push({
                    desc,
                    amount: Number(amount),
                    type,
                    category,
                    time
                });
            });
            render();
        };
        reader.readAsText(file);
    }
</script>
</body>
</html>
