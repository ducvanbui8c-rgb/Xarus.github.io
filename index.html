<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quáº£n lÃ½ tÃ i chÃ­nh cÃ¡ nhÃ¢n</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{--primary:#2c7be5;--bg:#f4f6f8}
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:var(--bg)}
header{background:var(--primary);color:#fff;padding:1rem;text-align:center}

nav{display:flex;background:#fff}
nav button{flex:1;padding:0.8rem;border:none;background:none;font-weight:bold;cursor:pointer}
nav button.active{background:var(--primary);color:#fff}

.container{max-width:1100px;margin:1rem auto;background:#fff;padding:1rem;border-radius:8px}
h2{color:var(--primary)}

input,select,button{width:100%;padding:0.6rem;margin-top:0.4rem}
button{background:var(--primary);color:white;border:none;border-radius:5px;cursor:pointer}

.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.table-wrapper{overflow-x:auto}
table{width:100%;border-collapse:collapse;margin-top:1rem}
th,td{border:1px solid #ccc;padding:0.5rem;text-align:center}

.income{color:green}
.expense{color:red}
.hidden{display:none}

@media(max-width:768px){.form-grid{grid-template-columns:1fr}}
</style>
</head>

<body>

<header>
<h1>Website Quáº£n LÃ½ TÃ i ChÃ­nh CÃ¡ NhÃ¢n</h1>
</header>

<nav>
<button onclick="showSection('dashboard')" class="active">ğŸ  Tá»•ng quan</button>
<button onclick="showSection('transaction')">ğŸ’¸ Thu / Chi</button>
<button onclick="showSection('category')">ğŸ“‚ Danh má»¥c</button>
<button onclick="showSection('budget')">ğŸ¯ NgÃ¢n sÃ¡ch</button>
<button onclick="showSection('report')">ğŸ“Š BÃ¡o cÃ¡o</button>
<button onclick="showSection('setting')">âš™ï¸ CÃ i Ä‘áº·t</button>
</nav>

<div class="container">

<section id="dashboard">
<h2>Tá»•ng quan</h2>
<p>Tá»•ng thu: <span class="income" id="totalIncome">0</span></p>
<p>Tá»•ng chi: <span class="expense" id="totalExpense">0</span></p>
<p>Sá»‘ dÆ°: <strong id="balance">0</strong></p>
</section>

<section id="transaction" class="hidden">
<h2>ThÃªm giao dá»‹ch</h2>
<div class="form-grid">
<input id="desc" placeholder="MÃ´ táº£">
<input id="amount" type="number" placeholder="Sá»‘ tiá»n">
<select id="type">
<option value="income">Thu nháº­p</option>
<option value="expense">Chi tiÃªu</option>
</select>
<select id="category"></select>
</div>
<button onclick="addTransaction()">â• ThÃªm</button>

<div class="table-wrapper">
<table>
<thead>
<tr><th>MÃ´ táº£</th><th>Sá»‘ tiá»n</th><th>Loáº¡i</th><th>NhÃ³m</th><th>Thá»i gian</th></tr>
</thead>
<tbody id="transactions"></tbody>
</table>
</div>
</section>

<section id="category" class="hidden">
<h2>Danh má»¥c</h2>
<input id="newCategory" placeholder="TÃªn danh má»¥c má»›i">
<button onclick="addCategory()">â• ThÃªm</button>
<ul id="categoryList"></ul>
</section>

<section id="budget" class="hidden">
<h2>NgÃ¢n sÃ¡ch</h2>
<select id="budgetCategory"></select>
<input id="budgetAmount" type="number" placeholder="Sá»‘ tiá»n tá»‘i Ä‘a">
<button onclick="setBudget()">ğŸ’¾ LÆ°u</button>
<ul id="budgetList"></ul>
</section>

<section id="report" class="hidden">
<h2>BÃ¡o cÃ¡o</h2>
<button onclick="exportCSV()">ğŸ“¥ Xuáº¥t CSV</button>
</section>

<section id="setting" class="hidden">
<h2>CÃ i Ä‘áº·t</h2>
<button onclick="clearData()">ğŸ—‘ï¸ XÃ³a toÃ n bá»™ dá»¯ liá»‡u</button>
</section>

</div>

<script>
let data = JSON.parse(localStorage.getItem("data")) || [];
let categories = JSON.parse(localStorage.getItem("categories")) || ["Ä‚n uá»‘ng","Há»c táº­p","Giáº£i trÃ­"];
let budgets = JSON.parse(localStorage.getItem("budgets")) || {};

function save(){
localStorage.setItem("data",JSON.stringify(data));
localStorage.setItem("categories",JSON.stringify(categories));
localStorage.setItem("budgets",JSON.stringify(budgets));
}

function showSection(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
event.target.classList.add("active");
}

function render(){
let income=0,expense=0;
transactions.innerHTML="";
data.forEach(t=>{
t.type==="income"?income+=t.amount:expense+=t.amount;
transactions.innerHTML+=`
<tr>
<td>${t.desc}</td>
<td>${t.amount}</td>
<td class="${t.type}">${t.type}</td>
<td>${t.category}</td>
<td>${t.time}</td>
</tr>`;
});
totalIncome.innerText=income;
totalExpense.innerText=expense;
balance.innerText=income-expense;
save();
}

function addTransaction(){
if(!desc.value||!amount.value) return alert("Nháº­p Ä‘á»§ dá»¯ liá»‡u");
data.push({
desc:desc.value,
amount:+amount.value,
type:type.value,
category:category.value,
time:new Date().toLocaleString()
});
render();
}

function loadCategories(){
category.innerHTML="";
budgetCategory.innerHTML="";
categoryList.innerHTML="";
categories.forEach(c=>{
category.innerHTML+=`<option>${c}</option>`;
budgetCategory.innerHTML+=`<option>${c}</option>`;
categoryList.innerHTML+=`<li>${c}</li>`;
});
}

function addCategory(){
if(!newCategory.value) return;
categories.push(newCategory.value);
newCategory.value="";
loadCategories();
save();
}

function setBudget(){
budgets[budgetCategory.value]=+budgetAmount.value;
budgetList.innerHTML="";
for(let c in budgets){
budgetList.innerHTML+=`<li>${c}: ${budgets[c]}</li>`;
}
save();
}

function exportCSV(){
let csv="MÃ´ táº£,Sá»‘ tiá»n,Loáº¡i,NhÃ³m,Thá»i gian\n";
data.forEach(t=>csv+=`${t.desc},${t.amount},${t.type},${t.category},${t.time}\n`);
let a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([csv]));
a.download="tai_chinh.csv";
a.click();
}

function clearData(){
if(confirm("XÃ³a toÃ n bá»™ dá»¯ liá»‡u?")){
localStorage.clear();
location.reload();
}
}

loadCategories();
render();
</script>

</body>
</html>
