<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω t√†i ch√≠nh c√° nh√¢n</title>

<!-- B·∫ÆT BU·ªòC cho mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --primary:#2c7be5;
}

*{
    box-sizing: border-box;
}

body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    margin:0;
}

header{
    background:var(--primary);
    color:#fff;
    padding:1rem;
    text-align:center;
}

.container{
    max-width:1000px;
    margin:1rem auto;
    background:#fff;
    padding:1rem;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

h2{
    color:var(--primary);
    margin-top:1.5rem;
}

input, select, button{
    width:100%;
    padding:0.6rem;
    margin-top:0.5rem;
    font-size:1rem;
}

button{
    background:var(--primary);
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
}

button:hover{
    background:#1a5fc1;
}

/* ===== FORM GRID ===== */
.form-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
}

/* ===== TABLE ===== */
.table-wrapper{
    overflow-x:auto;
}

table{
    width:100%;
    border-collapse:collapse;
    min-width:600px;
}

th, td{
    border:1px solid #ccc;
    padding:0.5rem;
    text-align:center;
}

.income{color:green;}
.expense{color:red;}

/* ===== ACTION BUTTONS ===== */
.actions{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
}

/* ===== MOBILE ===== */
@media (max-width:768px){
    .form-grid{
        grid-template-columns:1fr;
    }

    header h1{
        font-size:1.2rem;
    }

    table{
        font-size:0.9rem;
    }
}
</style>
</head>

<body>

<header>
    <h1>Website Qu·∫£n L√Ω T√†i Ch√≠nh C√° Nh√¢n</h1>
</header>

<div class="container">

<h2>Th√™m kho·∫£n thu / chi</h2>

<div class="form-grid">
    <input type="text" id="desc" placeholder="M√¥ t·∫£">
    <input type="number" id="amount" placeholder="S·ªë ti·ªÅn">
    <select id="type">
        <option value="income">Thu nh·∫≠p</option>
        <option value="expense">Chi ti√™u</option>
    </select>
    <select id="category">
        <option>ƒÇn u·ªëng</option>
        <option>H·ªçc t·∫≠p</option>
        <option>Gi·∫£i tr√≠</option>
        <option>ƒêi l·∫°i</option>
        <option>Kh√°c</option>
    </select>
</div>

<button onclick="addTransaction()">‚ûï Th√™m giao d·ªãch</button>

<h2>Danh s√°ch giao d·ªãch</h2>
<div class="table-wrapper">
<table>
<thead>
<tr>
    <th>M√¥ t·∫£</th>
    <th>S·ªë ti·ªÅn</th>
    <th>Lo·∫°i</th>
    <th>Nh√≥m</th>
    <th>Th·ªùi gian</th>
</tr>
</thead>
<tbody id="transactions"></tbody>
</table>
</div>

<h2>T·ªïng quan t√†i ch√≠nh</h2>
<p>T·ªïng thu: <span class="income" id="totalIncome">0</span></p>
<p>T·ªïng chi: <span class="expense" id="totalExpense">0</span></p>
<p>S·ªë d∆∞: <strong id="balance">0</strong></p>

<h2>L∆∞u & T·∫£i d·ªØ li·ªáu</h2>
<div class="actions">
    <button onclick="exportExcel()">üì• T·∫£i CSV</button>
    <input type="file" id="fileInput" accept=".csv" onchange="importExcel()">
</div>

</div>

<script>
let data=[];

function addTransaction(){
    const t={
        desc:desc.value,
        amount:Number(amount.value),
        type:type.value,
        category:category.value,
        time:new Date().toLocaleString()
    };
    if(!t.desc||!t.amount) return alert("Nh·∫≠p ƒë·ªß th√¥ng tin");
    data.push(t);
    render();
}

function render(){
    let income=0,expense=0;
    transactions.innerHTML="";
    data.forEach(t=>{
        t.type==="income"?income+=t.amount:expense+=t.amount;
        transactions.innerHTML+=`
        <tr>
            <td>${t.desc}</td>
            <td>${t.amount}</td>
            <td class="${t.type}">${t.type}</td>
            <td>${t.category}</td>
            <td>${t.time}</td>
        </tr>`;
    });
    totalIncome.innerText=income;
    totalExpense.innerText=expense;
    balance.innerText=income-expense;
}

function exportExcel(){
    let csv="M√¥ t·∫£,S·ªë ti·ªÅn,Lo·∫°i,Nh√≥m,Th·ªùi gian\n";
    data.forEach(t=>{
        csv+=`${t.desc},${t.amount},${t.type},${t.category},${t.time}\n`;
    });
    const blob=new Blob([csv],{type:"text/csv"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download="quan_ly_tai_chinh.csv";
    a.click();
}

function importExcel(){
    const file=fileInput.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=e=>{
        data=[];
        e.target.result.split("\n").slice(1).forEach(l=>{
            if(!l.trim()) return;
            const [desc,amount,type,category,time]=l.split(",");
            data.push({desc,amount:Number(amount),type,category,time});
        });
        render();
    };
    reader.readAsText(file);
}
</script>

</body>
</html>
